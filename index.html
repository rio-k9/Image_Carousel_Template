<!DOCTYPE html>
<html>
  <head>
    <title>
    Popup Image Gallery
    </title>
        <link rel="stylesheet" type="text/css" href="style.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
<body>

  <!-- TODO
  ADD / DELETE YOUR BUTTONS, MAKE SURE THE ID CORRESPONDS WITH THE CASE IN THE SWITCH LOOP
  -->
  <button class="gallery" id="StarWars">Star Wars</button>
  <button class="gallery" id="Tottenham">Spurs</button>
  <button class="gallery" id="JavaStock">Stock</button>
  <button class="gallery" id="JavaQuiz">Quiz</button>

  <div id="fade" class="black_overlay">
    <div class="popup">
      <button class="closeBtn"> X </button>
      <div class="imgGallery">
              <img class="nextarrow" src="images/nextarrow.png" />
        <div class="selectedImg">
        </div>
          <img class="nextarrow" src="images/nextarrow.png" />
        <div class="thumbContainer">
          <div class="reelCounter"></div>
        </div>
      </div>
    </div>
  </div>

    <script>

    $(document).ready(function () {
  /* GALLERY SCRIPT */

      /* TODO
      CHANGE THE VARIABLES TO YOUR RELEVANT FOLDER PATH / FILE EXTENSION
      */
      var filetype = '.png';
      var filepath = 'images/screenshots/';
      var filefolder = ['star/', 'spurs/', 'vue/', 'javaquiz/', 'javastock/', 'galactisee/'];

      /* TODO
      INPUT HOW MANY FILES ARE IN THE FOLDER, I.E folder 'star/' has 4 images
      */
      var filecount = [4, 6, 0, 6, 5, 0];
      var fileNum = 1;

      function getGallery(ftype, fpath, folder, folderNum){
          $(".thumbContainer").empty();
          $(".selectedImg").empty();
          for (var i = 1; i <= folderNum; i++){
            $('<img />', {
              class: 'imgThumb',
              src: fpath + folder + i.toString() + ftype
            }).appendTo(".thumbContainer");
          };
          $('<img />', {
            class: 'mainImg',
            src: fpath + folder + '1' + ftype
          }).appendTo(".selectedImg");
      }

      /* TODO
      ADD / REMOVE A CASE FOR EVERY FOLDER YOU HAVE, GIVE THE FILEFOLDER AND FILENUM INDEX RELEVANT
      */
      function switchGallery(btn) {
        switch (btn){
          case 'StarWars': getGallery(filetype, filepath, filefolder[0], filecount[0])
                          break;
          case 'Tottenham': getGallery(filetype, filepath, filefolder[1], filecount[1])
                          break;
          case 'Vue':       getGallery(filetype, filepath, filefolder[2], filecount[2])
                          break;
          case 'JavaQuiz':  getGallery(filetype, filepath, filefolder[3], filecount[3])
                          break;
          case 'JavaStock': getGallery(filetype, filepath, filefolder[4], filecount[4])
                          break;
          case 'Galactisee': getGallery(filetype, filepath, filefolder[5], filecount[5])
                          break;
        }
      }



    /* GALLERY EVENTS SCRIPT */


      function galleryEvents() {
        $(".thumbContainer img").on({
          mouseover: function () {
            $(this).css({
              'cursor': 'pointer',
              'border-color': '#7f1a1c',
              'transition' : '.7s'
            });

          },
          mouseout: function () {
            $(this).css({
              'cursor': 'default',
              'border-color' : 'grey'
            });
          },
          click : function () {
              var imageUrl = $(this).attr('src');
              console.log($('.mainImg'));
              $('.mainImg').removeAttr("id");
              console.log($('.mainImg'));
              $('.mainImg').fadeOut(1000, function () {
                $(this).attr('id', 'selected');
                $(this).attr('src', imageUrl);
                console.log($(this));
              }).fadeIn(1000);
            }
        });
      }
      /* GALLERY OPEN AND CLOSE SCRIPT */

        function closeWindow(e) {
          $('.black_overlay').slideFadeToggle(function() {
            e.removeClass('opened');
          });
        }

        $(function() {
          $('.gallery').on('click', function() {
              switchGallery(this.id);
              galleryEvents();
              $('closeBtn').addClass('opened');
              $('.black_overlay').slideFadeToggle();
          });
          $('.closeBtn').on('click', function() {
            closeWindow($('.gallery'));
            return false;
          });
        });

        $.fn.slideFadeToggle = function(easing, callback) {
          return this.animate({ opacity: 'toggle', height: 'toggle' }, 'fast', easing, callback);
        }

        var clickCount = 0;
        $(".nextarrow").click(function() {
          clickCount += 1;
          var cycleNum = 1;
          var $selected = $("#selected").removeAttr("id");
          var cycleImgs = $('.thumbContainer').children();
          console.log(cycleImgs);
          if (clickCount == 1)cycleNum = 2;
          var currentImg = cycleImgs.eq((cycleImgs.index($selected) + cycleNum) % cycleImgs.length).attr('id', 'selected');
          var cycledUrl = currentImg.attr('src');
          console.log(cycledUrl);
          $('.mainImg').fadeOut(1000, function () {
            $(this).attr('src', cycledUrl);
          }).fadeIn(1000);
        });


    });

    </script>
  </body>
</html>
